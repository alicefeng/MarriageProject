<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href='https://fonts.googleapis.com/css?family=Roboto+Slab:300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="css/style.css">

        <title>The Dynamics of Marriage </title>
    </head>
    
    <body>
		
		<div class="container">
			<div class="row" id="intro">
				<h1>Who's Marrying Whom?</h1>
				<h2>Looking at the socioeconomic dynamics of marriage</h2>
				<p>In the growing discourse about income inequality in the United States, much has been made about the state of marriage: that it is becoming increasingly concentrated among the well-off and well-educated, that people are pairing off with their socioeconomic peers.  Just how strong is that effect?</p>
			</div>
			<div id="occmatch" class="row inactive">
				<div class="col-sm-4 text">
					<h3>What Jobs do Married Couples Tend to Hold?</h3>
					<p>Let's first take a look at what occupations tend to pair off together.  Using the 2014 American Community Survey, we can observe the jobs held by over 200,000 married couples.</p>
					<p>The heatmap below shows just how common (or uncommon) marriages are between different occupations.  Occupations are ordered such that those with high paid, high educated workers are located in the top-left corner and those with low paid, low educated workers are in the bottom right.</p>
					<div class="datasource">
						Data Source: 2014 American Community Survey
					</div>
				</div>
				<div id="occheatmap" class="col-sm-8 viz"></div>
			</div>
			<div id="diff" class="row inactive">
				<div class="col-sm-4 text">
					<h3>Income and Education Levels Within Couples </h3>
					<p>Another way of examining the socioeconomic dynamics of marriage is to look at how spouses' income and education levels compare to one another.  Do people tend to marry those with similar earnings and educational attainment as themselves?</p>
					<div class="btn-group btn-group-sm" role="group">
						<button type="button" id="incplot" class="btn btn-default active" onclick="selectInc()">Income</button>
						<button type="button" id="eduplot" class="btn btn-default" onclick="selectEdu()">Education</button>
					</div>
					<svg class="legend">
						<g transform="translate(0,20)">
							<rect x="5" y="0" width="15" height="15" fill="#e66101"></rect><text x="25" y="10" id="diffless">Spouse Earns More</text>
							<rect x="5" y="20" width="15" height="15" fill="#e6e6e6"></rect><text x="25" y="30" id="diffsame">Spouse Earns Roughly the Same</text>
							<rect x="5" y="40" width="15" height="15" fill="#b2abd2"></rect><text x="25" y="50" id="diffmore">Spouse Earns Less</text>
						</g>
					</svg>
					<div class="datasource">
						Data Source: 2014 American Community Survey
					</div>
				</div>
				<div id="diffplot" class="col-sm-8 viz"></div>
			</div>
			<div id="conclusion" class="row">
				<p>Marriage dynamics are certainly complex and cannot just be boiled down to numbers and statistics but hopefully these graphs shed some light on who is marrying whom.</p>
			</div>
			<div id="occscatter" class="row inactive">
		        <div class="col-sm-4 text">
					<h3>Addendum: Some Facts about Occupations </h3>
					<p>Here is how average earnings, educational attainment, employment size and gender breakdown compare between these occupations. </p>
					<p>The size of the circle corresponds to the number of workers in that job grouping.</p>
					<svg class="legend">
						<defs>
							<linearGradient id="gender-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
								<stop offset="0%" style="stop-color:#0571b0;stop-opacity:1" />
								<stop offset="50%" style="stop-color:#f7f7f7;stop-opacity:1" />
								<stop offset="100%" style="stop-color:#ca0020;stop-opacity:1" />
							</linearGradient>
						</defs>
						<g>
							<text x="0" y="15">More Men</text>
							<rect x="55" y="0" width="100" height="20" fill="url(#gender-gradient)"></rect>
							<text x="160" y="15">More Women</text>
						</g>
					</svg>
					<div class="datasource">
						Data Sources: Bureau of Labor Statistics Employment Projections 2012-13, Current Population Survey 2015, Occupational Employment Statistics Survey 2015
					</div>
				</div>
				<div id="occscatterplot" class="col-sm-8 viz"></div>
			</div>
		</div>


        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>    	
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.3/ScrollMagic.js"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.3/plugins/animation.gsap.js"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.3/plugins/debug.addIndicators.js"></script>
    	<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
		<script type="text/javascript" src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>

		<script type="text/javascript" src="js/occheatmap.js"></script>
		<script type="text/javascript" src="js/incdiffplot.js"></script>
		<script type="text/javascript" src="js/occscatterplot.js"></script>
		<script>
			$(".btn").click(function() {
				$(this).addClass("active").siblings().removeClass("active");
			});

			$(function() {
				var controller = new ScrollMagic.Controller();

				new ScrollMagic.Scene()
					.triggerElement("#occmatch")
					.setClassToggle("#occmatch", "active")
					.duration(600)
					.addIndicators()
					.addTo(controller);

				new ScrollMagic.Scene()
					.triggerElement("#diff")
					.setClassToggle("#diff", "active")
					.duration(600)
					.addIndicators()
					.addTo(controller);
					
				new ScrollMagic.Scene()
					.triggerElement("#occscatter")
					.setClassToggle("#occscatter", "active")
					.duration(600)
					.addIndicators()
					.addTo(controller);	

			});

		</script>
    </body>

</html>
