<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href='https://fonts.googleapis.com/css?family=Roboto+Slab:300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="css/style.css">

        <title>The Dynamics of Marriage </title>
    </head>
    
    <body>
		
		<div class="container">
			<div class="row" id="intro">
				<div id="title">
					<h1>Who's Marrying Whom?</h1>
				</div>
				<div id="subtitle">
					<h4>Looking at the socioeconomic dynamics of marriage</h4>
				</div>	
				<p>In the growing discourse about income inequality in the United States, much has been made about the state of marriage: that it is becoming <a href="http://www.usnews.com/news/blogs/data-mine/2015/10/26/marriage-and-the-growing-class-divide">increasingly concentrated among the well-off and well-educated</a> and that people are <a href="http://www.nytimes.com/2015/12/27/upshot/marriages-of-power-couples-reinforce-income-inequality.html?_r=0">pairing off with their socioeconomic peers</a>.  Just how strong is that effect?</p>
			</div>
			<div id="occmatch" class="row inactive">
				<div class="col-sm-4 text" id="heatmaptitle">
					<h3>What Jobs do Married Couples Tend to Hold?</h3>
					<p>Let's first take a look at what occupations tend to pair off together.  Using the 2014 American Community Survey, we can observe the jobs held by over 200,000 married couples.</p>
					<p>The heatmap to the right shows just how common (or uncommon) marriages are between different occupation groups.  Groups are ordered such that those with high-paid, well-educated workers are located in the top-left corner and those with low-paid, less-educated workers are in the bottom right.</p>  
					<p>Hover over each square to find out what percentage of workers within one occupation marry those employed in another.</p>
				</div>
				<div id="occheatmap" class="col-sm-8 viz"></div>
			</div>
			<div id="diff" class="row inactive">
				<div class="col-sm-4 text">
					<h3>Income and Education Levels Between Spouses</h3>
					<p>Another way of examining the socioeconomic dynamics of marriage is to look at how spouses' income and education levels compare to one another.  Do people tend to marry those with similar earnings and educational attainment as themselves?</p>
					<p>Click below to see whether Lawyers and Judges tend to earn more than their spouses or if Building Cleaners and Groundskeepers have fewer years of schooling than their partners do.</p>
					<div class="btn-group btn-group-sm" role="group">
						<button type="button" id="incplot" class="btn btn-default active" onclick="selectInc()">Income</button>
						<button type="button" id="eduplot" class="btn btn-default" onclick="selectEdu()">Education</button>
					</div>
					<svg class="legend">
						<g transform="translate(0,20)">
							<rect x="5" y="0" width="15" height="15" fill="#e66101"></rect><text x="25" y="10" id="diffless">Spouse earns more</text>
							<rect x="5" y="20" width="15" height="15" fill="#f6f6f6"></rect><text x="25" y="30" id="diffsame">Spouse earns roughly the same</text>
							<rect x="5" y="40" width="15" height="15" fill="#b2abd2"></rect><text x="25" y="50" id="diffmore">Spouse earns less</text>
						</g>
					</svg>
				</div>
				<div id="diffplot" class="col-sm-8 viz"></div>
			</div>
			<div id="occcompare" class="row inactive">
				<div class="col-sm-4 text">
					<h3>Now let's take a look at who's getting and married who is not.</h3>
					<p>First let's examine which workers tend to get married.  For these next few graphs, we'll focus on adults between the ages of 35 to 50 since most people will have completed their education, been working and gotten married by then.</p>
					<p>The graph to the right breaks down the percentage of workers within each occupational group who are married.</p>
					<svg class="legend">
						<g transform="translate(0,20)">
							<rect x="5" y="0" width="15" height="15" fill="#6b5ea9"></rect><text x="25" y="10">Married</text>
							<rect x="5" y="20" width="15" height="15" fill="#bbb"></rect><text x="25" y="30">Not Married</text>
						</g>
					</svg>
				</div>
				<div id="occcompplot" class="col-sm-8 viz"></div>
			</div>
			<div id="inccompare" class="row inactive">
				<div class="col-sm-4 text">
					<p>Here's how the income distribution of married adults compares to those who are not married.</p>
				</div>
				<div id="inccompplot" class="col-sm-8 viz"></div>
			</div>
			<div id="educompare" class="row inactive">
				<div class="col-sm-4 text">
					<p>And here's what the educational attainment of married adults and unmarried adults look like.</p>
				</div>
				<div id="educompplot" class="col-sm-8 viz"></div>
			</div>
			<div id="conclusion" class="row">
				<p>Marriage dynamics are certainly complex and cannot just be boiled down to numbers and statistics, but it is nevertheless an important topic worth studying due to the associations between marriage, poverty, and the well-being of children.  Who's getting married to whom can impact not only the well-being of today's families but also that of future generations.</p>
			</div>
			<div id="occscatter" class="row inactive">
		        <div class="col-sm-4 text">
					<h3>Addendum: Some Facts about Occupations </h3>
					<p>Here is how average earnings, educational attainment, employment size and gender composition compare between these occupational groups. </p>
					<p>The size of the circle corresponds to the number of workers in that job grouping.  Hover over each circle to find out more details.</p>
					<svg class="legend">
						<defs>
							<linearGradient id="gender-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
								<stop offset="0%" style="stop-color:#0571b0;stop-opacity:1" />
								<stop offset="50%" style="stop-color:#f7f7f7;stop-opacity:1" />
								<stop offset="100%" style="stop-color:#ca0020;stop-opacity:1" />
							</linearGradient>
						</defs>
						<g>
							<text x="0" y="15">More Men</text>
							<rect x="55" y="0" width="100" height="20" fill="url(#gender-gradient)"></rect>
							<text x="160" y="15">More Women</text>
						</g>
					</svg>
				</div>
				<div id="occscatterplot" class="col-sm-8 viz"></div>
			</div>
			<div id="footer" class="row">
				Data Sources: 2014 American Community Survey, Bureau of Labor Statistics Employment Projections 2012-13, Current Population Survey 2015, Occupational Employment Statistics Survey 2015.
				Code and data available on Github.
			</div>
		</div>


        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>    	
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.3/ScrollMagic.js"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.3/plugins/animation.gsap.js"></script>
    	<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.3/plugins/debug.addIndicators.js"></script> -->
    	<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
		<script type="text/javascript" src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>

		<script type="text/javascript" src="js/occheatmap.js"></script>
		<script type="text/javascript" src="js/incdiffplot.js"></script>
		<script type="text/javascript" src="js/occcompplot.js"></script>
		<script type="text/javascript" src="js/inccompplot.js"></script>
		<script type="text/javascript" src="js/educompplot.js"></script>
		<script type="text/javascript" src="js/occscatterplot.js"></script>
		<script>
			$(".btn").click(function() {
				$(this).addClass("active").siblings().removeClass("active");
			});

			$(function() {
				var controller = new ScrollMagic.Controller();

				new ScrollMagic.Scene()
					.triggerElement("#occmatch")
					.setClassToggle("#occmatch", "active")
					.duration(780)
				//	.addIndicators()
					.addTo(controller);

				new ScrollMagic.Scene()
					.triggerElement("#diff")
					.setClassToggle("#diff", "active")
					.duration(700)
				//	.addIndicators()
					.addTo(controller);
					
				new ScrollMagic.Scene()
					.triggerElement("#occcompare")
					.setClassToggle("#occcompare", "active")
					.duration(700)
				//	.addIndicators()
					.addTo(controller);

				new ScrollMagic.Scene()
					.triggerElement("#inccompare")
					.setClassToggle("#inccompare", "active")
					.duration(500)
				//	.addIndicators()
					.addTo(controller);

				new ScrollMagic.Scene()
					.triggerElement("#educompare")
					.setClassToggle("#educompare", "active")
					.duration(500)
				//	.addIndicators()
					.addTo(controller);

				new ScrollMagic.Scene()
					.triggerElement("#occscatter")
					.setClassToggle("#occscatter", "active")
					.duration(700)
				//	.addIndicators()
					.addTo(controller);	

			});

		</script>
    </body>

</html>
